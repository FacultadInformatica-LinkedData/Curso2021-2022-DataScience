@prefix rr: <http://www.w3.org/ns/r2rml#>.
@prefix rml: <http://semweb.mmlab.be/ns/rml#>.
@prefix ql: <http://semweb.mmlab.be/ns/ql#>.          
@prefix ex: <http://example.com/ns#>.
@prefix xsd: <https://www.w3.org/XMLSchema/>.
@prefix schema: <http://www.schema.org/>.
@prefix clases: <https://www.mapmadrid.org/ontologia/Clases/>.
@prefix prop: <https://www.mapmadrid.org/ontologia/Propiedades/>.

<#Museos_Mapping> a rr:TriplesMap;
  rml:logicalSource [
    rml:source "./data/museos.csv" ;
    rml:referenceFormulation ql:CSV
  ];
  rr:subjectMap [
    rr:template "https://www.mapmadrid.org/resources/Museos/{PK}";
    rr:termType rr:IRI; rr:class clases:Museo;
  ];

  # Data Properties
  rr:predicateObjectMap [
    rr:predicate prop:tienePK;
    rr:objectMap [
      rml:reference "PK"; 
      rr:datatype xsd:positiveInteger
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate prop:horasApertura;
    rr:objectMap [
      rml:reference "HORARIO" ;
      rr:datatype xsd:string;
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate prop:trasnporteCercano;
    rr:objectMap [
      rml:reference "TRANSPORTE";
      rr:datatype xsd:string; 
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate prop:TelefonoContacto;
    rr:objectMap [
      rml:reference "TELEFONO";
      rr:datatype xsd:string; 
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate prop:Descripcion;
    rr:objectMap [
      rml:reference "DESCRIPCION";
      rr:datatype xsd:string; 
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate  prop:Equipamiento;
    rr:objectMap [
      rml:reference "EQUIPAMIENTO";
      rr:datatype xsd:string; 
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate prop:tieneDescripcionEntidad ;
    rr:objectMap [
      rml:reference "DESCRIPCION-ENTIDAD";
      rr:datatype xsd:string; 
    ]
  ];

    rr:predicateObjectMap [
    rr:predicate prop:emalContacto;
    rr:objectMap [
      rml:reference "EMAIL";
      rr:datatype xsd:string;
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate prop:tieneNombre;
    rr:objectMap [
      rml:reference "NOMBRE";
      rr:datatype xsd:string;
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate prop:estaLocalizado;
    rr:objectMap [ 
        rr:parentTriplesMap <#Localizaciones_Mapping>;
        rr:joinCondition [
            rr:child "ParsedStreet";  rr:parent "ParsedStreet";];
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate prop:esTipo;
    rr:objectMap [ 
        rr:parentTriplesMap <#TiposMuseos_Mapping>;
        rr:joinCondition [
            rr:child "TIPO";  rr:parent "TIPO";];
    ]
  ].

<#TiposMuseos_Mapping>  a rr:TriplesMap; 
    rml:logicalSource[
        rml:source "./data/museos.csv" ;
        rml:referenceFormulation ql:CSV
    ];
    rr:subjectMap [
        rr:template "https://www.mapmadrid.org/resources/Museo/Tipo/{TIPO}";
        rr:termType rr:IRI;
        rr:class clases:MuseoType;
    ].
